import axios, { AxiosRequestConfig } from "axios";
import { Config } from "../Config";

const authInterceptor = (config: AxiosRequestConfig) => {
 const token = localStorage.getItem("authToken");
  // const token='eyJhbGciOiJSUzI1NiIsImtpZCI6InByaXZhdGUtc2lnbmluZy1rZXkifQ.eyJzdWIiOiIyMWNkMmQ4Mi0xYmJjLTQzZTktODk4YS1kNWE0NWFiZGVjZWQiLCJuYW1lIjoiQW5kcmVzIiwidXNlck5hbWUiOiJBbmRyZXMiLCJlbWFpbCI6ImFuZHJlc29ybGFuZG9sb3BlekBnbWFpbC5jb20iLCJyb2xlcyI6WyJBZG1pbmlzdHJhdG9yIiwiTGFuZ3VhZ2UgZGV2ZWxvcGVyIiwiTGFuZ3VhZ2UgZGlyZWN0b3IiXSwicGVybWlzc2lvbnMiOlsiYWRtaW46Omxhbmd1YWdlczo6dXBkYXRlIiwiYWRtaW46Omxhbmd1YWdlczo6cXVlcnkiLCJhZG1pbjo6bGFuZ3VhZ2VzOjpkZWxldGUiLCJhZG1pbjo6bW9kZWxzOjp1cGRhdGUiLCJhZG1pbjo6bW9kZWxzOjpkZWxldGUiLCJhZG1pbjo6bW9kZWxzOjpxdWVyeSIsImFkbWluOjpwcm9qZWN0czo6dXBkYXRlIiwiYWRtaW46OnByb2plY3RzOjpxdWVyeSIsImFkbWluOjpwcm9qZWN0czo6ZGVsZXRlIiwidXNlcnM6OmRlbGV0ZSIsIm1pY3JvLXNlcnZpY2VzOjp1cGRhdGUiLCJtaWNyby1zZXJ2aWNlczo6cXVlcnkiLCJtZXRyaWNzOjpxdWVyeSIsInVzZXJzOjp1cGRhdGUiLCJ1c2Vyczo6cXVlcnkiLCJwZXJtaXNzaW9uczo6dXBkYXRlIiwicGVybWlzc2lvbnM6OnF1ZXJ5IiwicGVybWlzc2lvbnM6OmRlbGV0ZSIsInBlcm1pc3Npb25zOjpjcmVhdGUiLCJyb2xlczo6dXBkYXRlIiwicm9sZXM6OnF1ZXJ5Iiwicm9sZXM6OmRlbGV0ZSIsInJvbGVzOjpjcmVhdGUiLCJsYW5ndWFnZXM6OmRlbGV0ZSIsImxhbmd1YWdlczo6dXBkYXRlIiwibGFuZ3VhZ2VzOjpxdWVyeSIsImxhbmd1YWdlczo6Y3JlYXRlIiwibXktYWNjb3VudDo6dXBkYXRlIiwibXktYWNjb3VudDo6cXVlcnkiLCJDcmVhdGUgcHJvZHVjdCBsaW5lcyIsIkNyZWF0ZSBsYW5ndWFnZXMiLCJDcmVhdGUgbGFuZ3VhZ2VzIiwiQ3JlYXRlIHByb2R1Y3QgbGluZXMiLCJBcHByb3ZlIGxhbmd1YWdlcyJdLCJpYXQiOjE3NTUyNTU3MzAsImV4cCI6MTc1NTY4NzczMCwiYXVkIjoibG9jYWxob3N0In0.sq54c_NBo9Hrl-sy5X38OESrfz2k-ZTcmBpSQt8XMF-7nSpdVHXU4ZXubCcaS034nbhRmu-Zzp6WLnYU7tv8LJFv6PjQaAKge_e78IPD9QTzpqw12M6hSMDylO8dXdP_8-Bm4u1pidy8fXkKAfk0Q_8IrzxBXManQDUDWjMb51sUy3b_kFszEGpH5I_FDBI4P6wblDhfoRMQlkd2EWiw9kfgSo1mxBrn6xWPj9UB6pqccDhDwJZ09_yKfxNX5f7rUX4MxRc1VuKVNlssvjgltahsSyhuF11gsbhFeoZLOxR6QLamJRKq91baRv5eBEzkxgox2HSUTKxc5N_KfKb5AR-OJFbbAHO97NQ8fAelGZP5m5pFftflfQ7ITMplR7S0E82SaDw3jvowKEsQFU0cMVTDmMZY6Py7fQgzcxrgR7WMCzLe6bxtZnv-Wf1YppNsX61HWv6A4bKolzri5iNDWDoJDH5-UrAuR-darhda47oe_lJ7bF8P-dFAdbaUFJHtq57jDD_qa_T8BaSEnOZbo8rrBK2z0aalJXZEeQcoMa_7JMwDUL0U3ELUtRD8UDmYE_D0Zfmg47bxlhIyPB3plp-FEeZQVe6LqZny1pp2qNDYLlGfEwZmU2XNl3LwRNycHxsAa7p6XNmB1ZAUeSKqGbGPaeuF3ryuO9SukBtB3cg';  //todo: comentariar al publicar
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
};

export const ADMIN_CLIENT = axios.create({
  baseURL: Config.SERVICES.urlBackEndAdmin,
  timeout: 30000,
  withCredentials: true,
});

ADMIN_CLIENT.interceptors.request.use(authInterceptor);

export const LANGUAGES_CLIENT = axios.create({
  baseURL: Config.SERVICES.urlBackEndLanguage,
  timeout: 30000,
  withCredentials: true,
});

LANGUAGES_CLIENT.interceptors.request.use(authInterceptor);

export const PROJECTS_CLIENT = axios.create({
  baseURL: Config.SERVICES.urlBackEndProjectPersistence,
  timeout: 30000,
  withCredentials: true,
});

PROJECTS_CLIENT.interceptors.request.use(authInterceptor);
